<!-- Lainey Help from gpt, but most of the code is refactored from previous reading list code-->
{% extends 'base.html' %}

{% block content %}

{% load static %}

<style>
    .add-button {
        position: absolute;
        top: 5px;
        right: 10px;
        background-color: #5bc0de;
        color: white;
        padding: 10px;
        border: none;
        cursor: pointer;
            border-radius: 12%;
        
    }
    .popup {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 20px;
        border: 1px solid #ddd;
        background-color: white;
        display: none;  /* Hide the popup by default */
    }

    .popup.active {
        display: block;  /* Show the popup when it has the "active" class */
    }
    .read-item {
        position: relative;
    }

    .read-item::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 0;
        width: 100%;
        border-top: 4px solid black;
    }
    td {
        text-align: left;
        vertical-align: middle;
    }
    .update-form {
        display: flex;
        vertical-align: middle;
        height: 100%;
    }
</style>
<div class="container mt-4">
    <h2 class="text-center"><strong> Supplies Checklist </strong></h2>
    <table class="table mt-5 shadow" style="border-radius: 20px; overflow:hidden">
        <thead class="thead-dark">
            <tr>
                <th>Item</th>
                <th>Purchased?</th>
            </tr>
        </thead>
        <tbody>
            <ul>
                {% for item in items %}
                <li>
                    {{ item.name }} - <a href="{{ item.link }}">Link</a> - 
                    Purchased: {{ item.purchased|yesno:"Yes,No" }}
                </li>
                {% endfor %}
            </ul>
            <form method="POST" class="mb-4 mt-3">
                {% csrf_token %}
                <input type="hidden" name="form_type" value="clear">
                <div class="row mb-4 mt-5">
                    <div class="col-6 col-md-4">
                        <!-- Add button -->
                        <button type = "button" class="btn btn-primary position-fixed bottom-0 end-0 m-3 shadow" onclick="togglePopup()" style="font-size: 38px; width: 70px; height: 70px; border-radius: 70%;">+</button>
                </div>
            </form>
            <!-- Add supply item popup from gpt--> 
            <div id="addSupplyPopup" class="popup">
                <form method="post" action="{% url 'add_supply_item' %}" class="my-3">
                    {% csrf_token %}
                    {{ form.as_p }}
                    <input type="hidden" name="form_type" value="add">
                    <button type="submit" class="btn btn-primary rounded-pill">Confirm</button>
                    <button type="button" class="btn btn-outline-danger rounded-pill ml-5" onclick="toggleAddSupplyPopup()">Close</button>
                </form>  
            </div>
            <script>
                function toggleAddSupplyPopup() { 
                    var popup = document.getElementById("addSupplyPopup");
                    popup.classList.toggle("active");
                }
            </script>
    
        </tbody>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  </body>

</div>

{% endblock %}